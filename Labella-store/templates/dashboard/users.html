{% extends 'dashboard/base.html' %}
	
{% load static %}
{% block content %}

{% comment %} <div class="col-lg-12 grid-margin stretch-card">
    <div class="card"> {% endcomment %}
      <div class="card-body table-responsive">
        <h4 class="card-title">Users</h4>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th> ID</th>
              <th> First name </th>
              <th> Last name </th>
              <th> Phone </th>
              <th> Email </th>
              <th> Status </th>
              <th> action </th>
              
            </tr>
          </thead>
          <tbody>
            {% for i in users %}
            <tr>
              
              <td> {{i.id}} </td>
              <td> {{i.first_name}}</td>
              <td> {{i.last_name}}</td>
              <td> {{i.phone}}</td>
              <td> {{i.email}} </td>
              <!-- Modal for blocking user -->
<div class="modal fade" id="blockUserModal{{i.id}}" tabindex="-1" role="dialog" aria-labelledby="blockUserModalLabel{{i.id}}" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="blockUserModalLabel">Confirm Block User</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Are you sure you want to block this user?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <a class="btn btn-primary" href="{% url 'blockuser' i.id%}">Block</a>
      </div>
    </div>
  </div>
</div>

<!-- Modal for unblocking user -->
<div class="modal fade" id="unblockUserModal{{i.id}}" tabindex="-1" role="dialog" aria-labelledby="unblockUserModalLabel{{i.id}}" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="unblockUserModalLabel">Confirm Unblock User</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Are you sure you want to unblock this user?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <a class="btn btn-primary" href="{% url 'blockuser' i.id%}">Unblock</a>
      </div>
    </div>
  </div>
</div>

<!-- Button for blocking/unblocking user -->
<td>
  {% if i.is_active %}
    Active
    <td>
      <button class="btn btn-primary me-2" data-toggle="modal" data-target="#blockUserModal{{i.id}}">Block</button>
    </td>
  {% else %}
    Blocked
    <td>
      <button class="btn btn-primary me-2" data-toggle="modal" data-target="#unblockUserModal{{i.id}}">Unblock</button>
    </td>
  {% endif %}
</td>


              
            </tr>
          {% endfor %}
            

          
          </tbody>
        </table>
      </div>
    </div>
  {% comment %} </div>  {% endcomment %}

  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <script>
   {% for msg in messages %}
     swal("", "{{msg}}", "success");
   {% endforÂ %}
   </script>
















{% endblock %}